<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilot UDP</title>
    <style>
        body { background-color: #1a1a1a; color: #fff; font-family: sans-serif; text-align: center; padding-top: 50px; }
        h1 { margin-bottom: 40px; }
        button {
            display: block; width: 80%; max-width: 300px; margin: 20px auto; padding: 25px;
            font-size: 22px; font-weight: bold; border: none; border-radius: 12px; cursor: pointer;
            transition: transform 0.1s;
        }
        button:active { transform: scale(0.95); }
        .btn-on { background-color: #27ae60; color: white; }
        .btn-off { background-color: #c0392b; color: white; }
        #log { margin-top: 30px; color: #888; font-size: 14px; }
    </style>
</head>
<body>

    <h1>Panel Sterowania ESP</h1>

    <button class="btn-on" onclick="steruj('1')">WŁĄCZ DIODĘ</button>
    <button class="btn-off" onclick="steruj('0')">WYŁĄCZ DIODĘ</button>

    <div id="log">Gotowy...</div>

    <script>
        function steruj(komenda) {
            // Dodajemy losową liczbę (&t=...), żeby oszukać cache przeglądarki
            // Dzięki temu każde kliknięcie jest wysyłane do PHP
            fetch('cmd.php?c=' + komenda + '&t=' + Math.random())
                .then(response => response.text())
                .then(data => {
                    document.getElementById('log').innerText = data;
                })
                .catch(err => {
                    document.getElementById('log').innerText = "Błąd połączenia z PHP!";
                });
        }
    </script>

</body>
</html>